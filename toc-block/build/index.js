(()=>{"use strict";const e=window.React,t=window.wp.blocks,n=window.wp.blockEditor,r=window.wp.components,o=window.wp.element;(0,t.registerBlockType)("toc-block/inner-toc",{title:"Inner Table of Contents",icon:"list-view",category:"widgets",attributes:{tocItems:{type:"array",default:[]}},edit({attributes:t,setAttributes:l}){const c=(0,n.useBlockProps)(),[a,i]=(0,o.useState)([]),[s,m]=(0,o.useState)({}),[u,p]=(0,o.useState)({});return(0,o.useEffect)(()=>{const e=document.querySelector(".block-editor-writing-flow");if(!e)return;const t=Array.from(e.querySelectorAll("h2")).map((e,t)=>{const n=e.innerText||e.textContent||"",r=function(e){let t=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return t.length>30&&(t=t.substring(0,30).replace(/-+$/g,""),t+="..."),t}(n);return{text:n,anchor:r,customLabel:s[r]||"",ignore:!!u[r]}});i(t),l({tocItems:t})},[s,u]),(0,e.createElement)("div",{...c},(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:"Customize TOC Labels & Visibility"},a.map((t,n)=>(0,e.createElement)("div",{key:t.anchor,style:{marginBottom:"1em"}},(0,e.createElement)(r.TextControl,{label:`Label for: ${t.text}`,value:s[t.anchor]||"",onChange:e=>{return n=t.anchor,r=e,void m({...s,[n]:r});var n,r},placeholder:t.text}),(0,e.createElement)("label",{style:{display:"block",marginTop:"0.3em"}},(0,e.createElement)("input",{type:"checkbox",checked:!!u[t.anchor],onChange:e=>{return n=t.anchor,r=e.target.checked,void p({...u,[n]:r});var n,r}})," ","Ignore this H2 in TOC ",(0,e.createElement)("span",{style:{color:"#666",fontStyle:"italic"}},"(",t.text,")")))))),(0,e.createElement)("nav",{className:"toc-block-inner-toc"},(0,e.createElement)("ul",null,a.filter(e=>!e.ignore).map((t,n)=>(0,e.createElement)("li",{key:t.anchor},(0,e.createElement)("a",{href:`#${t.anchor}`},s[t.anchor]||t.text))))))},save:()=>null})})();